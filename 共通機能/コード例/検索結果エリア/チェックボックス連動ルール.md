```typescript
/**  Payloadを拡張（checkedプロパティ追加） */
type TblBudaimokuExPayload = TblBudaimokuPayload & { checked?: boolean };

const tableItems = ref<TblBudaimokuExPayload[]>([]);

/**  ヘッダーチェックボックス（computed化して双方向連動） */
const outputCheckBoxSelectAll = computed({
    get: () => {
        // 一覧が空の場合はfalse
        if (tableItems.value.length === 0) return false;
        // 全行がチェック済みの場合のみtrue
        return tableItems.value.every((item) => item.checked === true);
    },
    set: (value: boolean) => {
        // チェックボックスをクリックした時の処理
        tableItems.value.forEach((item) => (item.checked = value));
    },
});

/**  データ取得時にcheckedプロパティを追加 */
const loadTableItems = async () => {
    // ... API呼び出し
    const list = response.data.getFilteredTblBudaimoku.list;
    tableItems.value = list.map(x => ({ ...x, checked: false }));
};
<template>
    <el-table ...>
        <!--  選択列 -->
        <el-table-column label="選択" width="80">
            <template #header>
                <AlCheckBox v-model="outputCheckBoxSelectAll" itemName="選択" />
            </template>
            <template #default="scope">
                <AlCheckBox v-model="scope.row.checked" />
            </template>
        </el-table-column>
    </el-table>
</template>
```

**[禁止]** `watch`や`@change`での連動（一方向のみで双方向にならないため、getter/setterで双方向連動とする）

```typescript
// ❌ NG: watchでは一方向のみ
watch(outputCheckBoxSelectAll, (value) => {
    tableItems.value.forEach(x => x.checked = value);
});

// ✅ OK: computed getter/setterで双方向連動
const outputCheckBoxSelectAll = computed({
    get: () => ...,
    set: (value) => ...,
});
```

## getter/setterの判定基準

| 操作                | 動作              | 実装方法          |
| ------------------- | ----------------- | ----------------- |
| ヘッダーチェックON  | 全行ON            | `computed` setter |
| ヘッダーチェックOFF | 全行OFF           | `computed` setter |
| 全行がON            | ヘッダーも自動ON  | `computed` getter |
| 1行でもOFF          | ヘッダーも自動OFF | `computed` getter |
