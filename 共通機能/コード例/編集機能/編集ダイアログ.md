### エラーメッセージの配置パターン

編集ダイアログ内のエラーメッセージには2種類あり、**それぞれ配置場所が異なる**。

| エラー種別           | 配置場所             | 使用コンポーネント           | 用途                       |
| -------------------- | -------------------- | ---------------------------- | -------------------------- |
| サーバーエラー       | **ダイアログ最上部** | `<ul class="error-message">` | 通信失敗、登録エラー等     |
| バリデーションエラー | **各項目の下部**     | `<AlErrorMessageList>`       | 必須チェック、文字数制限等 |

#### 標準構造

```typescript
<el-dialog v-model="isVisible_Edit" @open="editingDialogOnOpen">
    // サーバーエラー：ダイアログ最上部 -->
    <ul v-if="registErrorMessages.length > 0" class="error-message">
        <li v-for="msg in registErrorMessages" :key="msg">{{ msg }}</li>
    </ul>

    <div id="pattern-a">
        <div class="container container01">
            <div class="dialogbox">
                <!-- 各入力項目 -->
                <div>
                    <AlLabel :itemName="t('item.code')" />
                    <AlTextBoxANK v-model="editingItem.code" :required="true" :maxLength="7" />
                    // バリデーションエラー：項目の直下 -->
                    <AlErrorMessageList :varidator="v$.editingItem.code" />
                </div>
                <div>
                    <AlLabel :itemName="t('item.name')" />
                    <AlTextBoxAll v-model="editingItem.name" :required="true" :maxLength="50" />
                    // バリデーションエラー：項目の直下 -->
                    <AlErrorMessageList :varidator="v$.editingItem.name" />
                </div>
            </div>
        </div>
    </div>
</el-dialog>
```

### 表示のみ項目のref定義

編集ダイアログに表示のみの項目がある場合:

```typescript
/** 編集ダイアログの表示状態 */
const isVisible_Edit = ref(false);

/** 表示のみ項目（編集不可） */
const code8_edit = ref<string | null>(null);
const shimei_edit = ref<string | null>(null);

/** 現在編集中の行データ */
const currentRow = ref<TableRowType | null>(null);
```

### 編集ボタンハンドラ

```typescript
/** 編集ボタン押下イベント */
const OnClickEditButton = (row: TableRowType) => {
  // 現在の行データを保持
  currentRow.value = row;

  // 表示のみ項目の設定
  code8_edit.value = row.code8 ?? null;
  shimei_edit.value = row.shimei ?? null;

  // 編集項目にデータをコピー
  Object.assign(editingItem, row.payload ?? buildEmptyPayload());

  // ダイアログを表示
  isVisible_Edit.value = true;
};
```

### 複合値ラジオボタン

複数DBカラムを1つのラジオボタンで管理する場合:

```typescript
/**ラジオボタンの値 */
const radioValue = ref<string | null>(null);

//表示時：複数カラムから1つの値を構築
if (item.typeA === "3" && item.typeB === "1") {
  radioValue.value = "3_1";
} else {
  radioValue.value = "3_0";
}

//登録時：1つの値を複数カラムに分割
const [typeA, typeB] = (radioValue.value ?? "3_0").split("_");
```

### チェックボックス boolean ⇔ string変換

DBのstring型（"0"/"1"）とチェックボックスのboolean型を変換:

```typescript
/**チェックボックス値の変換（computed setter使用） */
const checkValue = computed<boolean>({
  get: () => editingItem.flag === "1",
  set: (value) => {
    editingItem.flag = value ? "1" : "0";
  },
});
```

### 削除確認メッセージ

```typescript
/**削除確認メッセージ構築 */
const buildDeleteConfirmMessage = (row: TableRowType): string => {
  return `データを削除します。\n\n${row.code8}:${row.shimei}\n\n元に戻せません。よろしいですか？`;
};
```

```html
<!--el-popconfirmで削除確認 -->
<el-popconfirm
  :title="buildDeleteConfirmMessage(scope.row)"
  @confirm="OnClickDeleteButton(scope.row)"
>
  <template #reference>
    <AlButtonTrash />
  </template>
</el-popconfirm>
```
